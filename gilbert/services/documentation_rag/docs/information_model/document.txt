# Document

Fields relating to the text and contents of an article or post.

Formatting conventions:

- **bold** - If the field has an alias (used in the app), it is written in **bold**.
- _italics_ - Corresponding Gyda field names are written in _italics_.

## Body {: #document-body}

| Field Name                                        | Description                                                                                                                                                                                                                                                           | Filter Type                                                                                                       | Field Type                                     | Owner                   |
|---------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------|------------------------------------------------|-------------------------|
| body.content.text<br><br>**content** // _body_    | The main content of a document. For example the text of a news article or the content of a social media post.                                                                                                                                                         | Text search                                                                                                       | String                                         | Huntsman                |
| body.content.textLength                           | The length (# of characters) of the body.content.text field                                                                                                                                                                                                           | Range match, Exact match                                                                                          | Long                                           | Horace                  |
| body.byLine.text                                  | The document byline as provided in the source. <br><br>Usually contains information related to the document, like e.g. the name and maybe the position of the writer, etc.<br><br>Bylines are traditionally placed between the headline and the text of the articles. | Exact match                                                                                                       | String                                         | Huntsman                |
| body.metrics.rvn_score                            | N/A                                                                                                                                                                                                                                                                   | Exact match                                                                                                       | To be added                                    | TBD                     |
| body.contentTags<br><br>**hashtag**               | All the hashtags found in the document. The # characters are removed.                                                                                                                                                                                                 | Exact match                                                                                                       | Array of strings                               | Information Model Guild |
| body.emojis                                       | Emojis found in the document text fields (title, ingress, content). See [Emojis](document.md#emojis).                                                                                                                                                                 | Exact match                                                                                                       | Array of strings                               | Horace                  |
| body.ingress.text<br><br>**ingress** // _ingress_ | The ingress of a news article. Almost no social sources have this field populated.                                                                                                                                                                                    | Text search                                                                                                       | String                                         | Huntsman                |
| body.links.url<br><br>**link** // _url_           | Unfurled and expanded [links](document.md#links) found in a document. For example the URL that a `https://t.co/..` link redirects to.                                                                                                                                 | Exact match                                                                                                       | String. _body.links_ is an _array of objects_. | Information Model Guild |
| body.content.links<br><br>**containsLink**        | Unfurled and expanded [links](document.md#links) found in a document. For example the URL that a `https://t.co/..` link redirects to.<br><br>These links are [normalized](document.md#normalized-urls) to simplify searching on them.                                 | Normalized url search                                                                                             | Array of strings                               | Horace                  |
| body.mentions<br><br>**mention**                  | Social media handles/usernames the were mentioned in the document. The @ characters are removed.                                                                                                                                                                      | Exact match                                                                                                       | Array of strings                               | Information Model Guild |
| body.publishDate.date<br><br>_date_               | The time when the document was published. Timestamp in milliseconds since the Unix Epoch.                                                                                                                                                                             | Range match, exact match. Also used for [Date Histograms](/docs/default/api/search-api-v1/analytics/histograms/). | Long                                           | Huntsman                |
| body.title.text<br><br>**title** // _title_       | The title of the document. For example the title of a news article. Many social sources does not have the title field populated.                                                                                                                                      | Text search                                                                                                       | String                                         | Huntsman                |
| body.captions<br><br>**caption**                  | A list of on-screen information accompanying a video or images, e.g. names or places mentioned.                                                                                                                                                                       | Text search                                                                                                       | Array of strings                               | Shakespeare             |

### Emojis

The _body.emojis_ field contains a list of Unicode emojis that can be queried using a [Term query](/docs/default/api/search-api-v1/queries/field-queries/#term-query) or analyzed using a [Terms facet](/docs/default/api/search-api-v1/analytics/faceting/#terms-facet).

Initially body.emojis started being populated on documents received after August 20, 2019, but only a (fairly large) subset of all emojis were supported.

Emojis in documents prior to this date can be searched for using the body.content.text field. 
For documents added after November 20, 2019 the full Unicode emojis set is supported. 
This change introduced support for sequence emojis, including country flags, compound ZWJ emojis (for example woman golfing and families of different types) and other complex emojis. All valid Unicode emojis should be supported. 

The emojis are subject to some normalization to make searches and analysis easier. Here is a list of noteworthy quirks:

1. Skin colors are ignored in document ingestion, which has the following implications:

- You can not search for e.g. a dark skinned smiley. You can only search for a smiley and it will return all documents regardless of skin color.
- If you do a terms facet, which can be used for word clouds, emojis of all skin colors will be displayed as an emoji without skin color.

2. [Keycaps](https://emojipedia.org/keycap-digit-one/) are not supported. These are emojis that are numbers as keyboard buttons.

## Emotions

We attach 7 different emotions to textual content. Depending on the length and platform
either the `title` or `content` (concatenation of `byline`, `ingress`, and `content` itself) text is used for prediction.

| Field Name           | Description                    | Filter Type | Field Type       | Owner |
| -------------------- | ------------------------------ | ----------- | ---------------- | ----- |
| enrichments.emotions | Emotions detected in the text. | Exact match | Array of strings | Karma |

### Emotions Values

| enrichments.emotions | Description |
| -------------------- | ----------- |
| a                    | Anger       |
| d                    | Disgust     |
| f                    | Fear        |
| j                    | Joy         |
| l                    | Love        |
| s                    | Sadness     |
| b                    | Surprise    |
| u                    | Unknown     |

!!! error "Fallback value for enrichments.emotions"
`u` is used as a fallback to ensure consistency in indexing in case of any error in the pipeline.

## Sentiment

We attach polarities to textual content i.e., positive, negative, neutral, and unknown. It can be applied to parts of the content or its entirety, e.g., the whole document, selected sentences, or elements of interest in the document such as entities and keyphrases.

| Field Name                                                             | Description                                                                                                                           | Filter Type | Field Type    | Owner                   |
|------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------|-------------|---------------|-------------------------|
| enrichments.sentiment.discrete<br><br>**sentiment** // _sentiment_     | Sentiment detected in the document text. See [Discrete Sentiment](document.md#sentiment-values).                                      | Exact match | Enum (String) | Information Model Guild |
| enrichments.sentiment.originalSentiment<br><br>_originalSentiment_     | Original discrete sentiment before being overridden in this [Overlay](/docs/default/api/search-api-v1/advanced-usage/overlays/).      | Exact match | Enum (String) | Information Model Guild |
| enrichments.sentiment.isSentimentModified<br><br>_isSentimentModified_ | Boolean flag indicating if sentiment has been overridden in this [Overlay](/docs/default/api/search-api-v1/advanced-usage/overlays/). | Exact match | Boolean       | Information Model Guild |

### Sentiment Values

| enrichments.sentiment.discrete | Description |
| ------------------------------ | ----------- |
| p                              | Positive    |
| n                              | Neutral     |
| v                              | Negative    |
| u                              | Unknown     |

## Events

List of events found in the document. The types are predefined and are associated with companies for which the event applies to.
Owler is responsible for detecting the events and Core Platform map these back to documents.

| Field Name                                    | Description                                               | Filter Type | Field Type    | Owner               |
| --------------------------------------------- | --------------------------------------------------------- | ----------- | ------------- |---------------------|
| enrichments.events.eventType<br><br>**event** | Type of events. See [Event Type](document.md#event-type). | Exact match | Enum (String) | Owler/Core Platform |
| enrichments.events.companyName                | Company name associated with the event (KG data)          | Exact match | String        | Owler/Core Platform |
| enrichments.events.companyId                  | Company ID associated with the event (KG data)            | Exact match | String        | Owler/Core Platform |

### Event Type

Predefined list of all the event types that can be extracted from a document.

| documents.enrichments.events.eventType | Description                                 |
| -------------------------------------- | ------------------------------------------- |
| acquisition                            | Acquisition                                 |
| ai                                     | AI (inc. GenAI and LLMs)                    |
| award                                  | Award                                       |
| capacity_expansion                     | Capacity expansion                          |
| capacity_reduction                     | Capacity reduction                          |
| civil_law                              | Civil law                                   |
| conference_participation               | Conference participation                    |
| criminal_law                           | Criminal law                                |
| customer_win                           | Customer win                                |
| cyber_attack                           | Cyber attack                                |
| deib                                   | Diversity, equity, inclusion, and belonging |
| esg                                    | Environmental, social, and corp governance  |
| executive_appointment                  | Executive appointment                       |
| executive_departure                    | Executive departure                         |
| executive_replacement                  | Executive replacement                       |
| fundraising                            | Fundraising                                 |
| headcount_growth                       | Headcount growth                            |
| headcount_reduction                    | Headcount reduction                         |
| info_leak                              | Product Rumors                              |
| insolvency                             | Insolvency                                  |
| ipo                                    | IPO or IPO rumours                          |
| launch                                 | Launch                                      |
| market_expansion                       | Market Expansion                            |
| marketing_campaign                     | Marketing campaign                          |
| merger                                 | Merger                                      |
| neutral_financial_results              | Neutral financial results                   |
| partnership                            | Partnership                                 |
| pr_problem                             | PR problem                                  |
| quote                                  | Quote or citation                           |
| restructuring                          | Restructuring                               |
| strategy                               | Strategy                                    |
| strong_financial_results               | Strong financial results                    |
| valuation_change                       | Valuation change                            |
| valuation_decrease                     | Valuation decrease                          |
| valuation_increase                     | Valuation increase                          |
| weak_financial_results                 | Weak financial results                      |

## Clustering

A single namespace for topic clustering ids. This enables documents that have been identified as being about the same topic to be grouped.
Various methods for identifying these topics exist so multiple different clustering ids can exist on a single document.

| Field Name                     | Cluster Type                     | Source      | Field Type | Added By      |
| ------------------------------ | -------------------------------- | ----------- | ---------- | ------------- |
| enrichments.clustering.stories | LLM-based story clustering       | Linkfluence | List       | Core Platform |
| enrichments.clustering.events  | SVM-based event clustering       | Owler       | List       | Core Platform |
| enrichments.clustering.simhash | Charikar Hash (Unpopulated)      | Karma       | String     | Karma         |

## Keyphrases

Key phrases from the document's body (`body.title.text`, `body.ingress.text`, and `body.content.text`) ranked by relevance. See [Keyphrases](/docs/default/component/nlp-api-docs/keyphrase-extraction/) for details.

The _enrichments.keyPhrases_ field is an _array of objects_ and indexed as [Nested Objects](../terminology.md#nested-object).

| Field Name                                        | Description                                                                                                                                                   | Filter Type | Field Type       | Owner |
| ------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------- | ---------------- |-------|
| enrichments.keyPhrases.phrase<br><br>_keyPhrases_ | The text snippet that was extracted from the document text.                                                                                                   | Exact match | String           | Karma |
| enrichments.keyPhrases.terms                      | The normalize subject word of the keyphrase (lemmatized head noun). See [Keyphrases](/docs/default/component/nlp-api-docs/keyphrase-extraction/) for details. | Exact match | Array of strings | Karma |
| enrichments.keyPhrases.sentiment.discrete         | Sentiment for this key phrase in the document. See [Discrete Sentiment](document.md#sentiment).                                                               | Exact match |                  | Karma |
| enrichments.keyPhrases.relevance                  | a relevance score in the [0.0, 1.0] range. The higher the relevance the more relevant the phrase is judged by the analysis for the document content           | To be added | To be added      | Karma |

## Named Entities

Named entities mentioned in the document, such as companies, people and places. See Named Entity Recognition ([NER](/docs/default/component/nlp-api-docs/named-entity-recognition/)) and Named Entity Disambiguation ([NED](/docs/default/component/nlp-api-docs/named-entity-disambiguation/)) for more information.

The _enrichments.namedEntities_ field is an _array of objects_ and indexed as [Nested Objects](../terminology.md#nested-object).

| Field Name                                       | Description                                                                                                                                                                                                         | Filter Type | Field Type    | Owner |
|--------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-------------|---------------|-------|
| enrichments.namedEntities.canonicalName          | Canonical name of entity as disambiguated against an external ontology, for example "Meltwater"                                                                                                                     | Exact match | String        | Karma |
| enrichments.namedEntities.knowledgeGraphId       | Knowledge Graph Id of the named entity (FHAI Knowledge Graph Id)                                                                                                                                                    | Exact match | String        | Karma |
| enrichments.namedEntities.name<br><br>**entity** | Name of entity as written in the document, for example Wikipedia, DBPedia, Crunchbase, or the Fairhair.AI KG.                                                                                                       | Exact match | String        | Karma |
| enrichments.namedEntities.ontologyRef.key        | reference to the Wikipedia page of this entity.<br>key (identifier) in the referred ontology                                                                                                                        | To be added | String        | Karma |
| enrichments.namedEntities.ontologyRef.url        | reference to the Wikipedia page of this entity.<br>url to the referred external ontology                                                                                                                            | To be added | String        | Karma |
| enrichments.namedEntities.sentiment.discrete     | Sentiment for this entity in the document. See [Discrete Sentiment](document.md#sentiment).                                                                                                                         | Exact match | Enum (String) | Karma |
| enrichments.namedEntities.type                   | The type of the entity. See [Entity Types](document.md#entity-type).<br><br>This field is available on most editorial content (excluding tveyes, wordpress & blogs) and most social documents after 16th July 2020. | Exact match | String        | Karma |
| enrichments.namedEntities.score                  | relevance score of an entity within a document                                                                                                                                                                      | To be added | To be added   | Karma |

## Top Level Entities

Many of our Enterprise customers have a need to group and analyze entities as group (or list) that they care about. 
The current solution for this is to use the _Knowledge Graph_ (KG) information about Organisation/Product/Person/etc.. relationships and at _index time_ combine and aggregate the information (such as entity sentiment) about the group as a whole which complements the existing named entity (NED) information we store in other fields.  

Note that it is possible for one of the top level entities to be present in both the 'top level fields' and the 'named entities' fields at the same time. One example of that is if the top level entity Microsoft is mentioned in the document.

It is also possible that the top level entity is NOT present in the 'named entities' fields, for example if Sharepoint (which has Microsoft as its parent) is mentioned in the document, but the Microsoft entity is not mentioned by itself.

#### Top-Level Entity semantics
A top-level entity is an organization that (a) has at least one child (subsidiary, person, or product), AND (b) no parent organization (i.e., is not a subsidiary itself).

#### Grouping semantics
- Descendants are grouped to the top-most entity only, _not to the intermediate parent entities_
- Child companies are linked to the top-most parent company if it is in a subsidiary relationship to any of the intermediary
companies
- Child persons are linked to the top-most parent company if it is an executive or board member of the intermediary
companies
- Child products are linked to the parent company if it is produced by any of the intermediary companies

####  Sentiment aggregation semantics
- The sentiment of the top-level entity is computed per document by aggregating all the child entities (present in the
  document) sentiment polarities.
    - Sentiment is propagated from descendants to top-level entities (no weights are applied to distinguish generations)
    - At most one sentiment per top-level entity per document
- A top-level entity is created when any of its descendant entities are detected, even **when the top-level entity is not
explicitly mentioned in the article**
  - NB: In the case entities that belong to multiple top-level entities (e.g. Elon Musk -> Tesla, SpaceX, Boring Company
  etc), all the top-level entities will be shown in the dropdown but this is deemed acceptable as only 4% of persons in
  the KG are associated with multiple companies.

### Value uniqueness constraint
Note that we only allow one entry of a given KG id in one of the four `topLevelEntitySentiment` fields. 
Or in other words, it is NOT allowed for Google (id = gog-415) to be present in both
`enrichments.topLevelEntitySentiment.p` and `enrichments.topLevelEntitySentiment.v`, only one of the field is chosen at index time.

| Field Name                            | Description                                                                                                                                                        | Filter Type | Field Type    | Owner |
|---------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------| ----------- | ------------- |-------|
| enrichments.topLevelEntitySentiment.p | This field contians a (possibly empty) list of KG entity ids of the top level entites that are determined to be talked about in a **positive way** in the document | Exact match | String        | Karma |
| enrichments.topLevelEntitySentiment.n | This field contians a (possibly empty) list of KG entity ids of the top level entites that are determined to be talked about in a **neutral way** in the document  | Exact match | String        | Karma |
| enrichments.topLevelEntitySentiment.v | This field contians a (possibly empty) list of KG entity ids of the top level entites that are determined to be talked about in a **negative way** in the document | Exact match | String        | Karma |
| enrichments.topLevelEntitySentiment.u | This field contians a (possibly empty) list of KG entity ids where the sentiment towards the top level entity **can not be determined**                            | Exact match | String        | Karma |

## Topics

Text classification and categorization.

| Field Name                                             | Description                                                                                                                                                                                     | Filter Type | Field Type                                                                                                                   | Owner       |
| ------------------------------------------------------ | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------- | ---------------------------------------------------------------------------------------------------------------------------- | ----------- |
| enrichments.categories.label<br><br>**category**       | Wikipedia category classification on the document text. See [Document Categories](/docs/default/component/nlp-api-docs/document-categorizer/) for a list of available categories.               | Exact match | String. _enrichments.categories_ is an _array of objects_ and indexed as [Nested Objects](../terminology.md#nested-object).  | Karma       |
| enrichments.categories.relevance                       | To be added                                                                                                                                                                                     | To be added | To be added                                                                                                                  | Karma       |
| enrichments.topics                                     | Customized [RoBERTa](https://arxiv.org/abs/1907.11692) topic classification on the document text. Each detected topic is hierarchical with the maximum of 3 levels.                             | Exact match | String. _enrichments.topics_ is an _array of objects_ and indexed as [Nested Objects](../terminology.md#nested-object).      | Linkfluence |
| enrichments.conceptsTop.conceptName<br><br>**concept** | Wikipedia concept classification of document text in localized language. See [Concept Extraction](/docs/default/component/nlp-api-docs/document-categorizer/) for a list of available concepts. | Exact match | String. _enrichments.conceptsTop_ is an _array of objects_ and indexed as [Nested Objects](../terminology.md#nested-object). | Karma       |
| enrichments.conceptsTop.canonicalName                  | To be added                                                                                                                                                                                     | To be added | To be added                                                                                                                  | Karma       |
| enrichments.conceptsTop.relevance                      | To be added                                                                                                                                                                                     | To be added | To be added                                                                                                                  | Karma       |
| enrichments.topics.level1                              | Customized RoBERTa topic classification on the document text. Each detected topic is hierarchical with the maximum of 3 levels. This is level 1                                                 | Exact match | String. enrichments.topics is an array of objects and indexed as Nested Objects.                                             | Linkfluence |
| enrichments.topics.level2                              | Customized RoBERTa topic classification on the document text. Each detected topic is hierarchical with the maximum of 3 levels. This is level 2                                                 | Exact match | String. enrichments.topics is an array of objects and indexed as Nested Objects.                                             | Linkfluence |
| enrichments.topics.level3                              | Customized RoBERTa topic classification on the document text. Each detected topic is hierarchical with the maximum of 3 levels. This is level 3                                                 | Exact match | String. enrichments.topics is an array of objects and indexed as Nested Objects.                                             | Linkfluence |

## Image Analysis

Image classification and categorization.

| Field Name                                          | Description                                                                                                                                                                                                                                                                                                                         | Filter Type                                        | Field Type                                                                                                                           | Owner               |
|-----------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------|---------------------|
| enrichments.image.content.scene                     | Describe the scene context of an image. 126 different scenes.                                                                                                                                                                                                                                                                       | Exact match                                        | List of strings                                                                                                                      | Linkfluence         |
| enrichments.image.content.peopleDensity             | Number of persons detected in the images regrouped in 4 labels: solo (1 person), duo (2 persons), group (3 to 10 persons), crowd (11+ persons) the count is performed using the maximum value between the number of "person" label from object detection and the number of faces detected in the image.                             | Exact match                                        | String                                                                                                                               | Linkfluence         |
| enrichments.image.content.object                    | Set of objects and animals detected in the image. 80 different objects/animals                                                                                                                                                                                                                                                      | Exact match                                        | List of strings                                                                                                                      | Linkfluence         |
| enrichments.image.content.objects.categories.level1 | Category for each detected object, each category is hierarchical with a maximum of 6 levels. This is level 1                                                                                                                                                                                                                        | Exact match                                        | String. enrichments.image.content.objects.categories is an array of objects and indexed as Nested Objects.                           | Linkfluence         |
| enrichments.image.content.objects.categories.level2 | Category for each detected object, each category is hierarchical with a maximum of 6 levels. This is level 2                                                                                                                                                                                                                        | Exact match                                        | String. enrichments.image.content.objects.categories is an array of objects and indexed as Nested Objects.                           | Linkfluence         |
| enrichments.image.content.objects.categories.level3 | Category for each detected object, each category is hierarchical with a maximum of 6 levels. This is level 3                                                                                                                                                                                                                        | Exact match                                        | String. enrichments.image.content.objects.categories is an array of objects and indexed as Nested Objects.                           | Linkfluence         |
| enrichments.image.content.objects.categories.level4 | Category for each detected object, each category is hierarchical with a maximum of 6 levels. This is level 4                                                                                                                                                                                                                        |
| enrichments.image.content.objects.categories.level5 | Category for each detected object, each category is hierarchical with a maximum of 6 levels. This is level 5                                                                                                                                                                                                                        |
| enrichments.image.content.objects.categories.level6 | Category for each detected object, each category is hierarchical with a maximum of 6 levels. This is level 6                                                                                                                                                                                                                        |
| enrichments.image.content.ocr                       | Texts detected in the image. A maximum of 50 text results can be returned per image. A text result length is always between 1 and 32 chars.                                                                                                                                                                                         | Exact match                                        | List of strings                                                                                                                      | Linkfluence         |
| enrichments.image.meme                              | Whether an image is a meme.                                                                                                                                                                                                                                                                                                         | Exact match                                        | Boolean                                                                                                                              | Linkfluence         |
| enrichments.image.nsfw                              | Whether an image is considered as Not Safe For Work.                                                                                                                                                                                                                                                                                | Exact match                                        | Boolean                                                                                                                              | Linkfluence         |
| enrichments.image.age                               | Most probable class predicted by the model (by count) that was detected in the image. Age algorithm is applied on all detected faces in the image. Age classes are defined as the following: "children" (age < 13), "teenagers" (13 <= age < 22), "young_adults" (22 <= age < 31), "adults" (31 <= age < 61), "seniors" (61 <= age). | Exact match                                        | List of strings                                                                                                                      | Linkfluence         |
| enrichments.image.gender                            | Gender top class (by count) that was detected in the image. Gender algorithm is applied on all detected faces in the image. Labels are: "m" (for male), "f" (for female) and "u" (for undefined).                                                                                                                                   | Exact match                                        | List of strings                                                                                                                      | Linkfluence         |
| enrichments.image.emotion                           | Emotion top class (by count) that was detected in the image. Emotion algorithm is applied on all detected faces in the image. Emotion labels are: "neutral", "angry", "happy".                                                                                                                                                      | Exact match                                        | List of strings                                                                                                                      | Linkfluence         |
| enrichments.image.namedEntities                     | Logos and celebrities detected in the image.                                                                                                                                                                                                                                                                                        | Exact match                                        | String. _enrichments.image.namedEntities_ is an _array of objects_ and indexed as [Nested Objects](../terminology.md#nested-object). | Linkfluence         |
| enrichments.image.namedEntities.name                | Name of the person of organisation logo detected on the image                                                                                                                                                                                                                                                                       | Exact match                                        | String. _enrichments.image.namedEntities_ is an _array of objects_ and indexed as [Nested Objects](../terminology.md#nested-object). | Linkfluence         |
| enrichments.image.namedEntities.type                | Person or organization logo detected on the image                                                                                                                                                                                                                                                                                   | Exact match                                        | String. _enrichments.image.namedEntities_ is an _array of objects_ and indexed as [Nested Objects](../terminology.md#nested-object). | Linkfluence         |
| enrichments.image.namedEntities.id                  | Linkfluence ID of the organisation or person detected on the image                                                                                                                                                                                                                                                                  | Exact match                                        | String. _enrichments.image.namedEntities_ is an _array of objects_ and indexed as [Nested Objects](../terminology.md#nested-object). | Linkfluence         |
| enrichments.image.embedding.base64Encoded           | A string representation of the Embedding vector encoded in base64 (only available in CI app see below )                                                                                                                                                                                                                             | cannot be matched (stored only + _exists_ queries) | String                                                                                                                               | Linkfluence AI team |             

### About `enrichments.image.embedding.base64Encoded`
Currently, this field is only stored in CI indices (see [ci-information-model-extensions](../../../../ci-information-model-extensions/docs/dataset/fields/radar.md)). This field uses feature [#416](https://github.com/meltwater/platform-tenants/pull/416) to store the embedding vector in base64. The field cannot be matched but using `exists` queries allows to filter documents having an image embedding computed. 

## Embeddings
Fields containing embedding vectors that can be used for knn searches and potentially other vector operations.
The field name of the embedding should preferably contain a unique identifier of the embedding model that was used to
produce the dense vectors stored in the field.

Embedding fields of dense_vector type will not be retrievable from the index, i.e. you can't get the vectors back from elasticsearch, you can only search on them. 

**NOTE** _At the moment embedding fields are NOT stored or indexed in the main elasticsearch v7 cluster._ If you would like to add an embedding field to the information model, please contact Team Horace for guidance and help.

| Field Name                                           | Description                                                                                                                                   | Filter Type | Field Type   | Owner  |
|------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------|-------------|--------------|--------|
| enrichments.embeddings.clippyV1.contentChunks.vector | Field that contains dense vectors produced by Clippy. The intended use case of this field is evaluations and PoCs of semantic search features | N/A         | Dense vector | Horace |

## Attachments

Attachments are files attached to a document, for example images found in an article or post. The attachments are stored as a list of objects.

| Field Name                                      | Description                                                                                                                                                                                                                                                                                                                    | Filter Type                 | Field Type | Owner         |
| ----------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | --------------------------- | ---------- | ------------- |
| attachments.link<br><br>_images[].link_         | URL of attachment.                                                                                                                                                                                                                                                                                                             | _Not supported in queries._ | String     | Shakespeare   |
| attachments.thumbnail                           | URL of thumbnail image (if applicable)                                                                                                                                                                                                                                                                                         | _Not supported in queries._ | String     | Core Platform |
| attachments.width                               | to be added                                                                                                                                                                                                                                                                                                                    | _Not supported in queries._ | Integer    | Shakespeare   |
| attachments.source                              | to be added                                                                                                                                                                                                                                                                                                                    | _Not supported in queries._ | String     | Shakespeare   |
| attachments.secureLink                          | to be added                                                                                                                                                                                                                                                                                                                    | _Not supported in queries._ | String     | Shakespeare   |
| attachments.height                              | to be added                                                                                                                                                                                                                                                                                                                    | _Not supported in queries._ | Integer    | Shakespeare   |
| attachments.description                         | Description of attachment. <br>For example alternate text for image attachments.                                                                                                                                                                                                                                               | _Not supported in queries._ | String     | Shakespeare   |
| attachments.data                                | The attachment itself. The format varies and can both be entire html documents, or just links to <br><br>If the data is binary, it should be provided in Base64-encoded format. <br><br>Textual data is provided as UTF-8. <br><br>Additionally the data must comply with the format specification of the specified MIME-type. | _Not supported in queries._ | String     | Shakespeare   |
| attachments.mimeType<br><br>_images[].mimeType_ | MIME type of attachment, for example "image/jpeg" or "application/pdf".                                                                                                                                                                                                                                                        | _Not supported in queries._ | String     | Shakespeare   |
| attachments.name<br><br>_images[].name_         | File name of attachment.                                                                                                                                                                                                                                                                                                       | _Not supported in queries._ | String     | Shakespeare   |
| attachments.type                                | Type for each attachment, for example "image", "video" or "image-gallery"                                                                                                                                                                                                                                                      | _Not supported in queries._ | String     | Core Platform |
| metaData.attachmentTypes                        | Automatically populated by all _attachments.type_ values to allow them to be used in queries.                                                                                                                                                                                                                                  | Exact match                 | String     | Core Platform |

## Language

Language specifiers use the BCP-47 standard to define language codes, for example "en" and "sv". Language codes can be found in [this registry](https://www.iana.org/assignments/language-subtag-registry/language-subtag-registry).

| Field Name                                 | Description                                                                                                                                                                                                                                                          | Filter Type | Owner |
| ------------------------------------------ | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------- |-------|
| enrichments.languageCode<br><br>_language_ | Detected language code. Typically a 2 or 3 letter [primary language tag](https://www.w3.org/International/articles/language-tags/#language). Exceptions for Chinese which is classified as either "zh-Hans" (Simplified Chinese) or "zh-Hant" (Traditional Chinese). | Exact match | Karma |

## Salespromotion

Specify whether the document is sales and promotional type. Values for the field is boolean.

| Field Name                                   | Description                                                                                                                              | Filter Type | Owner |
| -------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------- | ----------- | ----- |
| enrichments.promotional<br><br>_promotional_ | promotional - Specify whether the document is sales and promotional type. Values for the field is boolean                                | Exact match | Karma |
| enrichments.nsfw<br><br>_nsfw_               | Not Safe For Work (NSFW) - Specify whether the document's content is not safe for work (text or images). Values for the field is boolean | Exact match | Karma |

## Metadata

| Field Name                                                          | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | Filter Type                                                                                                          | Field Type                                           | Owner                          |
|---------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------|------------------------------------------------------|--------------------------------|
| enrichments.charikarLSH<br><br>_charikarLSH_                        | Charikar LSH (Locality Sentitive Hash) of body.content.text used for document deduplication together with the [Clustering](/docs/default/api/search-api-v1/results/clustering/) support in Search API.                                                                                                                                                                                                                                                                                                                                                       | _Not supported in queries, can only be used with [Clustering](/docs/default/api/search-api-v1/results/clustering/)._ | String                                               | Karma                          |
| externalId                                                          | A unique external identifier of the document in an URN format. To ensure identifier uniqueness, it is namespaced with information about the origin of the document. For example "id:twitter.com:1234567"                                                                                                                                                                                                                                                                                                                                                     | Exact match                                                                                                          | String                                               | Information Model Guild        |
| id<br><br>_documentId_                                              | Unique identifier of a document. Must be a URL safe Base64 encoded string as calculated by RFC 4648 section 5, essentially replacing '+' and '/' with '-' and '\_' in the Base64 character set.                                                                                                                                                                                                                                                                                                                                                              | Exact match                                                                                                          | String                                               | Horace                         |
| metaData.adCampaign.adAccountId<br><br>**adAccountId, adaccountid** | The source account that created the campaign that this document is part of.<br><br>Also present on comments on campaign posts.                                                                                                                                                                                                                                                                                                                                                                                                                               | Exact match                                                                                                          | String                                               | Section 31                     |
| metaData.adCampaign.campaignId<br><br>**campaignId, campaignid**    | The source ID for the Campaign that this document is part of. Campaign details is hosted by Section 31.<br><br>Also present on comments on campaign posts.                                                                                                                                                                                                                                                                                                                                                                                                   | Exact match                                                                                                          | String                                               | Section 31                     |
| metaData.applicationTags                                            | Tags used by applications. Use a URN scheme, e.g. "mi:some-tag" to keep different applications separate. See [Application Tags](application-tags.md).                                                                                                                                                                                                                                                                                                                                                                                                        | Exact match                                                                                                          | Array of strings                                     | Information Model Guild        |
| metaData.client.name<br><br>**client**                              | User agent string of the device used to publish a social media post, for example "Twitter for Android"                                                                                                                                                                                                                                                                                                                                                                                                                                                       | Text search                                                                                                          | String                                               | Shared (Source ingestion team) |
| metaData.discussionType<br><br>**postType, posttype**               | Type of post, e.g., an original post, a reply, quote or direct message. See [Discussion Type](document.md#discussion-type).                                                                                                                                                                                                                                                                                                                                                                                                                                  | Exact match                                                                                                          | Enum (String)                                        | Information Model Guild        |
| metaData.domains<br><br>**domains**                                 | Domain names extracted from _metaData.url_ field, e.g. `https://some.example.com/some/path/index.html` would yield the domain `["example.com"]`.<br><br>The extraction is a best effort at trying to figure out the least specific interesting domain. For most websites it will just be the main domain (for example `nytimes.com`) but for some it might be subdomains (for example `some-blog.blogspot.com` as `blogspot.com` is not too valuable)                                                                                                        | Exact match                                                                                                          | Array of strings (In practice it's just one element) | Horace                         |
| metaData.fetchingTime                                               | The timestamp for the time of the collection of the document                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | Not possible to search in                                                                                            | Long                                                 | Huntsman                       |
| metaData.grouping.id                                                | Some external providers send data which enables us to identify content which is syndicated within their network. Populating metaData.grouping.id with this data, we have a vendor-specified relationship between documents, enabling us to accurately identify duplicate documents.  <br><br>e.g. MediaConnect provide `<SynNumber>1234</SynNumber>` on some documents they send us - we extract this and populate metaData.grouping.id with "1234": all documents with the same metaData.grouping.id of "1234" can be searched for/displayed as duplicates. | Exact match                                                                                                          | String                                               | Shakespeare                    |
| metaData.grouping.isOriginal                                        | Boolean flag indicating whether a document grouped based on metaData.grouping.id is the original (true) or a copy (false). Should only be populated if metaData.grouping.id is populated.                                                                                                                                                                                                                                                                                                                                                                    | Exact match                                                                                                          | Boolean                                              | Shakespeare                    |
| metaData.indexingTime                                               | the timestamp for the time when the document got into the index                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | To be added                                                                                                          | To be added                                          | Horace                         |
| metaData.updateVersion                                              | version to preserve the order of updates                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | To be added                                                                                                          | To be added                                          | Horace                         |
| metaData.inReplyTo.url<br><br>**replyUrl, replyurl, replyURL**      | Individual URL of a document that this document is replying to, e.g., the parent Tweet or comment for a Tweet or Reddit.                                                                                                                                                                                                                                                                                                                                                                                                                                     | Exact match                                                                                                          | Array of strings                                     | Shared (Source ingestion team) |
| metaData.inReplyTo.externalId                                       | See _externalId_ above. When a document is a reply to, a retweet of, or a quote of another document with an _externalId_ value, this field gets populated with that external id.                                                                                                                                                                                                                                                                                                                                                                             | Exact match                                                                                                          | String                                               | Shared (Source ingestion team) |
| metaData.inReplyTo.author.externalId                                | The user id of the parent document's author, e.g., the parent of a retweet. Only used for twitter and facebook private messages at the moment.                                                                                                                                                                                                                                                                                                                                                                                                               | Exact match                                                                                                          | String                                               | Shared (Source ingestion team) |
| metaData.inReplyTo.author.imageUrl                                  | In the case of facebook private messages, this is the sender profile image url                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | Exact match                                                                                                          | String                                               | Section 31                     |
| metaData.inReplyTo.author.rawName                                   | In the case of facebook private messages, this is the sender raw name from API url                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | Exact match                                                                                                          | String                                               | Section 31                     |
| metaData.inReplyTo.author.handle                                    | The instagram username of the root document's author, e.g., the 'og' of a mentioned comment/reply. Only used for instagram mentions at the moment.                                                                                                                                                                                                                                                                                                                                                                                                           | Exact match                                                                                                          | String                                               | Section 31                     |
| metaData.mediaType                                                  | Type of the document, e.g., news article or Tweet. See [Media Type](document.md#media-type)                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | Exact match                                                                                                          | Enum (String)                                        | Hedgehog                       |
| metaData.product                                                    | Field for searching in product reviews, mapped from "item" in Socialgist                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | To be added                                                                                                          | String                                               | TBD                            |
| metaData.randomSampling                                             | A random 16 bit integer between -32768 and 32767, with the document id used as seed. Can be used to retrieve a random sample of documents, e.g. `metaData.randomSampling >= 0` to get a 50% sample or `>= 26214` to get a 10% sample. Calculated as `((1-x/100)*2^16)-2^15` where `x` is the desired sampling percentage.                                                                                                                                                                                                                                    | Range match, exact match                                                                                             | Short                                                | Horace                         |
| metaData.receivedTime                                               | the timestamp for the time when the document was received by the ingestion pipeline                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | To be added                                                                                                          | To be added                                          | Horace                         |
| metaData.source.avatar                                              | the avatar for the source feed. For example a url to the dowjones logo if it's a premium editorial feed                                                                                                                                                                                                                                                                                                                                                                                                                                                      | To be added                                                                                                          | String                                               | Shared (Source ingestion team) |
| metaData.thread.title                                               | Title of parent post the document comments on, e.g., the Reddit post title on which the document is a comment.                                                                                                                                                                                                                                                                                                                                                                                                                                               | Text search                                                                                                          | String                                               | Shared (Source ingestion team) |
| metaData.thread.url                                                 | URL of parent post the document comments on.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | Exact match                                                                                                          | String                                               | Shared (Source ingestion team) |
| metaData.thread.id                                                  | ID of the message thread. For example, a Facebook thread of private messages can have a common id.                                                                                                                                                                                                                                                                                                                                                                                                                                                           | Exact match                                                                                                          | String                                               | Shared (Source ingestion team) |
| metaData.url<br><br>**url**                                         | URL of the document.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | Exact match                                                                                                          | String                                               | Huntsman                       |
| metaData.analyzedUrl<br><br>**site**                                | Text match version of the URL of the document.<br><br>The URL is [normalized](document.md#normalized-urls) to simplify searching on it.                                                                                                                                                                                                                                                                                                                                                                                                                      | Text match                                                                                                           | String                                               | Horace                         |
| metaData.userTags<br><br>**tag** // _tags_                          | Tags set by users.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | Exact match                                                                                                          | Array of strings                                     | Flamingo                       |
| metaData.audienceRestrictions.region                                | Region IDs                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | Text match                                                                                                           | Array of strings                                     | Section 31                     |
| metaData.audienceRestrictions.cities                                | City IDs                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | Text match                                                                                                           | Array of strings                                     | Section 31                     |
| metaData.audienceRestrictions.country                               | Country IDs                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | Text match                                                                                                           | Array of strings                                     | Section 31                     |
| metaData.audienceRestrictions.minAge                                | Minimum age See [minAge](audience-restrictions.md).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | Exact match                                                                                                          | String                                               | Section 31                     |                                                                                            
| metaData.audienceRestrictions.industry                              | Industry IDs                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | Text match                                                                                                           | Array of strings                                     | Section 31                     |
| metaData.audienceRestrictions.seniority                             | Seniority IDs                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | Text match                                                                                                           | Array of strings                                     | Section 31                     |
| metaData.audienceRestrictions.jobFunction                           | Job Function IDs                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | Text match                                                                                                           | Array of strings                                     | Section 31                     |
| metaData.audienceRestrictions.staffSize                             | staff sizes See [staffSize](audience-restrictions.md).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | Text match                                                                                                           | Array of strings                                     | Section 31                     |
| metaData.audienceRestrictions.location                              | Location IDs                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | Text match                                                                                                           | Array of strings                                     | Section 31                     |
| metaData.audienceRestrictions.language                              | Language IDs                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | Text match                                                                                                           | Array of strings                                     | Section 31                     |
| metaData.audienceRestrictions.schools                               | School IDs                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | Text match                                                                                                           | Array of strings                                     | Section 31                     |


### Discussion Type

Type of post, for example a reply to a previous comment or a retweet.

| metaData.discussionType | Description                          |
| ----------------------- | ------------------------------------ |
| og                      | Original post/tweet/article          |
| re                      | Reply to post/tweet                  |
| qt                      | Quote and comment                    |
| rp                      | Repost/retweet/re-blogged/re-printed |
| dm                      | Direct/private message               |

### Media Type

Type of the specific document, such as news article or Tweet. Note that a single source can produce documents of different media type, e.g., a blog produces both posts and comments.

| metaData.mediaType | Description                                                  |
| ------------------ | ------------------------------------------------------------ |
| au                 | Audio. For example pod casts or radio transcript.            |
| bl                 | Blog post.                                                   |
| cm                 | Comment.                                                     |
| mb                 | Microblog post. For example a Tweet.                         |
| md                 | Message board post.                                          |
| news               | News article.                                                |
| re                 | Reddit post or comment.                                      |
| rv                 | Review. For example products, hotels, restaurants, ...       |
| sc                 | Social post. For example a Facebook or Instagram post.       |
| vi                 | Video. For example YouTube video or TV broadcast transcript. |
| ot                 | Other. Used for RSS.                                         |


#### Derived news outlet type

For news document a content based category is derived from a pre-defined boolean rule.
This field is limited to hold the same value as the source derived outlet type (`metaData.source.outletTypes`) ([Documentation](../source#outlet-types)).

| Field Name                          | Description                         | Filter Type | Field Type       | Owner  |
|-------------------------------------|-------------------------------------| ----------- | ---------------- |--------|
| enrichments.media.news.categories   | Derived "outlet type" from content. | Exact match | Array of strings | Horace |

### Entity Type

The type of the identified entity.

| enrichments.namedEntities.type | Description                                                                            |
| ------------------------------ | -------------------------------------------------------------------------------------- |
| person                         | The name of a (Human) Person whether real (Barack Obama) or imaginary (Batman).        |
| organization                   | The name of an organization, e.g., Apple.                                              |
| location                       | The name of a place, e.g., London.                                                     |
| product                        | The name of a product, e.g., Apple iPhone.                                             |
| money                          | Only available for Thai documents                                                      |
| brand                          | Only available for editorial documents running through the legacy enrichment pipeline. |
| hashtag                        | Entity type that is prefixed with a hashtag (#)                                        |
| handle                         | Entity type that is prefixed with a handle (@)                                         |
| misc                           | Pretty much everything else, eg tv show, sports events etc.                            |

### Links

Despite the careful crawling the `body.links.url` and `body.content.links` may contain some strange or unwanted items:

- `mailto://` or `file://` links
- links pointing to a share button
- redirecting links

When you process this data you also need to know that the links:

- might contain some social media links
- might refer to a URL shortener services
- might point to tracker or aggregator sites

### Normalized URLs

Some fields contains normalized URLs. This makes it easier to search on them. Normalization does the following:

1. Remove protocol (`http://` or `https://`)
2. Add `www.` to the start of the URL if it does not point to a subdomain.

By removing the protocol there is no need to search for both http and https. In fact, if you include the protocol in your search you will not get any matches since the protocol is not stored.

By adding `www.` to URLs that are not subdomains you can search for articles on a website, but not from subdomains. Searching for `metaData.analyzedUrl:"blogspot.com"` would return articles from blogspot.com and articles from any subdomain of blogspot.com. If we only want articles from the main site we can search for `metaData.analyzedUrl:"www.blogspot.com"`.

## Provider Specific

| Field Name                                  | Description                                                                                         | Filter Type                 | Field Type  | Owner       |
|---------------------------------------------|-----------------------------------------------------------------------------------------------------| --------------------------- | ----------- | ----------- |
| providerSpecific.description                | To be added                                                                                         | To be added                 | To be added | shakespeare |
| providerSpecific.companyId                  | To be added                                                                                         | To be added                 | To be added | TBD         |
| providerSpecific.docId                      | To be added                                                                                         | To be added                 | To be added | Shakespeare |
| providerSpecific.docType                    | To be added                                                                                         | To be added                 | To be added | Shakespeare |
| providerSpecific.duration                   | To be added                                                                                         | To be added                 | To be added | Shakespeare |
| providerSpecific.facebookPostType           | Type of the facebook post. For example "recommendation".                                            | Exact match                 | String      | Section 31  |
| providerSpecific.globalReach                | To be added                                                                                         | To be added                 | To be added | Shakespeare |
| providerSpecific.gnipIntensedebate.language | To be added                                                                                         | To be added                 | To be added | TBD         |
| providerSpecific.meta.language              | To be added                                                                                         | To be added                 | To be added | TBD         |
| providerSpecific.localReach                 | To be added                                                                                         | To be added                 | To be added | Shakespeare |
| providerSpecific.meta.userLocation          | To be added                                                                                         | To be added                 | To be added | TBD         |
| providerSpecific.stationID                  | To be added                                                                                         | To be added                 | To be added | Shakespeare |
| providerSpecific.url                        | To be added                                                                                         | To be added                 | To be added | Shakespeare |
| providerSpecific.utcDelta                   | To be added                                                                                         | To be added                 | To be added | Shakespeare |
| providerSpecific.googleReviewRating         | Star numerical rating in text. For example, "FIVE".                                                 | To be added                 | String      | Section 31  |
| providerSpecific.pulitzerSourceConfigId     | Pulitzer Source Config used to generate the quiddity. Only applicable to Crawled Editorial Content. | _Not supported in queries._ | String      | Huntsman    |
| providerSpecific.extractorName              | Extractor name used to verify which extractor was used for extraction.                              | _Not supported in queries._ | String      | Huntsman    |
