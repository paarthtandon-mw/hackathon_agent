# System

System metadata fields relating to this document.

Corresponding Gyda field names are written in italics.

### Fields

| Field Name                                             | Description                                                                                                                                                                                                                                                                                    | Filter Type                                           | Field Type                     | Owner                          |
|--------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------|--------------------------------|--------------------------------|
| __included_with                                        |                                                                                                                                                                                                                                                                                                |                                                       |                                | Horace                         |
| __excluded_for                                         |                                                                                                                                                                                                                                                                                                |                                                       |                                | Horace                         |
| metaData.fetchingTime<br><br>*fetchingTime*            | The time this document was retrieved by a crawler or received in a feed. Timestamp in milliseconds since the Unix Epoch.                                                                                                                                                                       | Not supported in queries                              | Long                           | Shared (Source ingestion team) |
| metaData.indexingTime                                  | The time this document was stored in the index. Timestamp in milliseconds since the Unix Epoch.                                                                                                                                                                                                | Range match                                           | Long                           | Horace                         |
| systemData.documentStored                              | Set to true by the storage sub-system after the document was successfully stored.<br><br>This is useful information because it is not guaranteed that the document is stored due to various reasons, such as it not being the latest version, or is considered a duplicate of an existing doc. | To be added                                           | Boolean                        | Horace                         |
| systemData.legacySupport.newsId                        | To be added                                                                                                                                                                                                                                                                                    | To be added                                           | To be added                    | TBD                            |
| systemData.package.names                               | Package                                                                                                                                                                                                                                                                                        | Should not be searched. <br>Used by system.           | List of PackageName ({`base`}) | Horace                         |
| systemData.policies.storage.documentStored             | **Deprecated**. Non used field.                                                                                                                                                                                                                                                                | Should not be searched. <br>Used by system.           | To be added                    | Horace                         |
| systemData.policies.storage.overwrite                  | To be added                                                                                                                                                                                                                                                                                    | Should not be searched. <br>Used by system.           | To be added                    | Huntsman                       |
| systemData.policies.storage.private<br><br>**private** | Flag indicating if this document is private, see [Overlays](/docs/default/api/search-api-v1/advanced-usage/overlays/).                                                                                                                                                                         | Exact match                                           | Boolean                        | Horace                         |
| systemData.policies.storage.privateTo                  | Namespace that this document is private to, see [Overlays](/docs/default/api/search-api-v1/advanced-usage/overlays/).                                                                                                                                                                          | Exact match                                           | List (String)                  | Horace                         |
| systemData.status                                      | Visibility status of this document. See [Document Status](#document-status)                                                                                                                                                                                                                    | Exact match                                           | Enum (String)                  | Horace                         |
| systemData.sampling.percentile_5                       | A field which sets this document as a 5% sampled subset of indexed twitter documents.                                                                                                                                                                                                          | Should not be searched. <br>Used by system.           | Boolean                        | Horace                         |
| systemData.sampling.percentile_10                      | A field which sets this document as a 10% sampled subset of indexed twitter documents.                                                                                                                                                                                                         | Should not be searched. <br>Used by system.           | Boolean                        | Horace                         |
| systemData.sampling.percentile_25                      | A field which sets this document as a 25% sampled subset of indexed twitter documents.                                                                                                                                                                                                         | Should not be searched. <br>Used by system.           | Boolean                        | Horace                         |
| systemData.transformationRules.matchedRules            | Which document transformation rule ids matched the documents                                                                                                                                                                                                                                   | Not supported in queries                              | List (String)                  | Horace                         |
| systemData.restrictions.blockedInCountries             | Which countries this content is blocked in. Format is lowercase ISO_3166-1_alpha-2.                                                                                                                                                                                                            | Should not be searched. <br>Used by system.           | List (String)                  | Horace                         |
| systemData.restrictions.blockedInAllCountries          | If this content is blocked in all countries. Has higher precedence than blockedInCountries.                                                                                                                                                                                                    | Should not be searched. <br>Used by system.           | Boolean                        | Horace                         |
| systemData.restrictions.blockedByCopyright             | If this content violates copyright law and should be hidden.                                                                                                                                                                                                                                   | Should not be searched. <br>Used by system.           | Boolean                        | Horace                         |
| systemData.restrictions.excludedForEntitlements        | A field that contains a list of entitlements, whereby customers that have this entitlement should not see this document. This is because a premium version of this document exists for those customers.                                                                                        | Exact match.                                          | List (String)                  | Horace / Huntsman              |
| systemData.restrictions.restrictionReasons             | The description of the hidden reasons assigned to the document.                                                                                                                                                                                                                                | Should not be searched. <br>Used by system.           | List (Enum (String))           | Horace                         |
| systemData.current.trigger.fields.updated              | A field that contains a list of names of fields that have been affected by the current change.                                                                                                                                                                                                 | Should not be searched. <br>This field is not stored. | List (String)                  | Horace                         |
| systemData.current.trigger.eventType                   | A field that contains an enum showing the event that triggered the current change.                                                                                                                                                                                                             | Should not be searched. <br>This field is not stored. | Enum (String)                  | Horace                         |
| systemData.current.trigger.overlayGroup                | A field that contains the id of the entity that triggered the current change.                                                                                                                                                                                                                  | Should not be searched. <br>This field is not stored. | String                         | Horace                         |
| systemData.overlay.fields                              | A field that contains a list of names of fields that have been overridden in the overlaid document                                                                                                                                                                                             | Exact match.                                          | List (String)                  | Horace                         |


### What is systemData.current.trigger?

In IR, all changes to a document is triggered by some event happening. A document can be indexed, overwritten, updated, deleted, get overlaid etc... As more and more use cases require forwarding of this information from storage to the downstream components, like Alerting, we started having a general need for transmitting this information. Since storing and persisting this information would be costly, we decided to use a transient field that represents the triggering
event for the current trigger. The field has a polymorphic structure that contains the necessary information for the downstream components to do their own processing. The triggering events are discriminated using the `systemData.current.trigger.eventType` field, and then, depending on that, it would have fields representing the details of the event. For example, for an update event, it would contain the list of updated fields, while for an overlay, it would contain
the name of the overlay group.

Please keep in mind that this field is transient, so it cannot be searched for, though it is possible to percolate on. The field will be extended further as the use cases develop for more information. 

### Document Status

| systemData.status | Description                                                                                                                                                                                                                     |
|-------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| active            | Document is active and visible. This is the normal state of documents.                                                                                                                                                          |
| disabled          | **Deprecated** Document should not be displayed to any customer and should be treated as deleted.                                                                                                                               |
| deleted           | Document has been deleted and should not be sent to any customer. It may still have all the information but it could also be tombstoned. A tombstoned document only contains the document id and a few system or source fields. |

### TriggerEventType

| systemData.current.trigger.eventType | Description                                              |
|--------------------------------------|----------------------------------------------------------|
| overlay                              | This document is an overlay that was modified privately. |
