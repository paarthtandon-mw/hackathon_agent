# Request Modifiers

## Purpose

The Search/Export API V2 is built on top of the Search/Export API V1, but provides some enhancements to enrich requests and results. To achieve this extra functionality, it needs some extra information about the request - for example determining that company the request is for to know what company country the copyright restrictions should be applied for. This extra information is wrapped in a `modifiers` object as part of the request.

Here's the outline of a search request including `modifiers`:

```json
{
   "query": {
     // searchQuery as per Search API
   },
   "viewRequests": {
     // some viewRequests as per Search API
   },
   "scope": [
     // document states to search as per Search API
   ],
   "modifiers": {
     // extra parameters we use to modify the Search API request
   },
   "metaData: {
     // request meta data for tracing
   }
}             
```

## Sample `modifiers`

The following gives an example of what a populated `modifiers` object looks like. We'll go through each item in more detail below.

```json
"modifiers": {
  "requestorCompanyId": "59083370321316ebf2ca4242",
  "requestorUserId": "42423370321316ebf2ca4242",
  "productType": "swagger",
  "enableLegalRestrictions": true,
  "enablePaywall": true,
  "enableGeonames": true,
  "enableMWTransitionTokens": false,
  "enableAuthorEnrichments": false,
  "twitterApproved": false,
  "documentFormat": "gyda"
}
```

## `modifiers` parameters in detail

| Name                     | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | Required                                                                                                                                                                                       | Default      |
|--------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|--------------|
| requestorCompanyId       | The company ID the documents are being requested on behalf of.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | Yes                                                                                                                                                                                            |              |
| requestorUserId          | The user ID the documents are being requested on behalf of.<br><br>This is used for reporting and is required when when regional restrictions are enabled. Please provide it when possible to keep our Compliance Reporting consistent.`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | **Search API V2**: No, but should be included when available<br><br>**Export API V2**: No, but should be included when available<br><br>**Consumer Ready Document API**: Yes, required<br><br> |              |
| productType              | The name of product the results are being requested for. E.g. `Explore`, `Monitor`.<br>If you build a new service, which sends a previously unused productType, please let us know in advance in #platypus channel on slack, to ensure that the content restrictions are applied appropriately.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | Yes                                                                                                                                                                                            |              |
| enableLegalRestrictions  | A boolean flag representing whether or not the result should be legally compliant. If you are going to deliver the results to a user, this should be set to `true`.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | No                                                                                                                                                                                             | `true`       |
| enableSummarizationFlag  | A boolean flag representing whether or not [isSummarizationDisabled](v2-consumer-attributes.md) field in response should be populated. The field will also be populated when enableLegalRestrictions is true. Therefore, this flag is useful for determining the summarizability of the document when legal restrictions are not applied.                                                                                                                                                                                                                                                                                                                                                                                                                                                    | No                                                                                                                                                                                             |              |
| enablePaywall            | A boolean flag representing whether or not paywall URLs should be added to resultList documents                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | No                                                                                                                                                                                             | `true`       |
| enableGeonames           | A boolean flag representing whether or not to enrich geographical locations on documents in result. Unenriched, geo locations are represented by a [Geonames Id](https://geonames.org/). Enriched, they contain further details, such as names, coordinates, etc. This feature can only be used if at least one field with a geonames ID is part of the results (typically `metaData.source.location`).                                                                                                                                                                                                                                                                                                                                                                                      | No                                                                                                                                                                                             | `false`      |
| enableMWTransitionTokens | A boolean flag representing whether or not mwTransition tokens are added to resultList documents.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | No                                                                                                                                                                                             | `false`      |
| twitterApproved          | A boolean flag representing whether or not "Twitter Guardrails" restrictions should be applied to the results. The value of `twitterApproved` should be based on whether or not the searches that are used to build the searchQuery are "approved". Approved searches will have the value `"twitterGuardrailsApproval": true` when retrieved from MASFSearch. If the searchQuery is comprised of multiple searches, all searches must have `"twitterGuardrailsApproval": true` to set `twitterApproved` to `true`. If any approved searches runes are modified when building a searchQuery, `twitterApproved` should be set to `false`. For more details, check out the [Twitter Guardrails Playbook](https://docs.google.com/document/d/1b9CPV-7L0tFZGwjMqA74o1GMh2PwEVqwCZZKSu6EMZQ/edit). | No                                                                                                                                                                                             | `false`      |
| documentFormat           | A string parameter that determines the format of the documents in the response. Acceptable values are: `quiddity` or `gyda`. For more information on document formats, check out Document formats.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | No                                                                                                                                                                                             | `"quiddity"` |
| enableAuthorEnrichments  | *["Beta Feature"]* A boolean flag representing whether or not to enrich twitter document with additional data from Klear and Linkfluence.<br><br>IMPORTANT: Format of the response will be changed in the future.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | No                                                                                                                                                                                             | `false`      |

