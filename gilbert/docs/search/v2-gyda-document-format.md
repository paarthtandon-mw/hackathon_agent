# Gyda document format
The gyda document format is a application specific format which is a simplified version of the [General tenant schema](https://backstage.meltwater.io/docs/default/Component/mi-information-model/dataset/fields/) also known as 'Quiddity'. Some fields in the gyda format are directly mapped from the fields on the General tenant schema, whereas some fields are computed in the contextual layer. The computed
fields may make use of some fields on the General tenant schema or may be entirely created based on the consumer specific information such as the company, entitlement, user etc.

## Fields mapped to General tenant schema fields

The following fields are mapped to one or more fields on the General tenant schema or search response highlights. 

In some cases, additional logic decides which quiddity fields should be used for mapping. This logic is usually source/document-type specific. For example, for Twitter, the `title` value is usually mapped from `body.title.text`, but for some social content like Reddit, the value is mapped from `metaData.thread.title`.

| Field                    | Type                        | Description                                                                                                                                                                                                                                                                |
|--------------------------|-----------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| documentId               | string                      | The unique identified of the document                                                                                                                                                                                                                                      |
| externalId               | string                      | A unique external identifier of the document in an URN format. To ensure identifier uniqueness, it is namespaced with information about the origin of the document.                                                                                                        |
| provider                 | enum (string)               | A unique identifier which denotes the name of the content provider from whom we obtained the document. See [Provider type](https://backstage.meltwater.io/docs/default/component/mi-information-model/dataset/fields/source/#provider-type) for the list of product types. |
| providerSpecifier        | string                      | A unique identifier which denotes the specific fetcher or mechanism used to obtain the document                                                                                                                                                                            |
| hostedContent            | string                      | Full textual content of the document. This field is only stored for documents from some premium providers, with whom Meltwater has an agreement to self-host the content.                                                                                                  |
| ingress                  | string                      | The ingress of the article.                                                                                                                                                                                                                                                |
| matchSentence            | string                      | The fragment of the content that matches the search terms.                                                                                                                                                                                                                 |
| sentiment                | string (char)               | A single character representation of the document's sentiment                                                                                                                                                                                                              |
| originalSentiment        | string (char)               | The original sentiment of the document as enriched at ingestion time, before it was overridden by a customer.                                                                                                                                                              |
| isSentimentModified      | boolean                     | A boolean flag indicating whether the sentiment of this document was overridden by a customer.                                                                                                                                                                             |
| sourceId                 | string                      | The id of the "classical" (Magenta) source to which the document belongs.                                                                                                                                                                                                  |
| source                   | string                      | The name of the "classical" (Magenta) source to which the document belongs.                                                                                                                                                                                                |
| sourceUrl                | string                      | The URL of the "classical" (Magenta) source to which the document belongs.                                                                                                                                                                                                 |
| disambiguatedSourceId    | string                      | The unique Kermit id of the source                                                                                                                                                                                                                                         |
| country                  | string (2 char)             | This is the lower cased 2 letter [ISO 3166-1 Alpha-2](https://en.wikipedia.org/wiki/ISO_3166-1#Current_codes) code for the country                                                                                                                                         |
| keyPhrases               | list (string)               | A list of key phrases from the document                                                                                                                                                                                                                                    |
| metrics                  | object                      | An object containing the social engagement metrics for the document                                                                                                                                                                                                        |
| potentialReach           | object                      | An object containing the potential reach of the document over desktop and mobile                                                                                                                                                                                           |
| tags                     | list (string)               | The list of tags a user might have applied to the document.                                                                                                                                                                                                                |
| images                   | list (string)               | The list of urls pointing to images in the article                                                                                                                                                                                                                         |
| informationType          | string                      | The medium through which the document was published, ie: News/Social/Broadcast                                                                                                                                                                                             |
| mediaType                | string                      | The specific type of content that the document represents, ie: tv, au (radio), bl (blog) etc                                                                                                                                                                               |
| keywords                 | list (string)               | The list of keywords matching the query                                                                                                                                                                                                                                    |
| matchTags                | list (string)               | The list of tags matching the query                                                                                                                                                                                                                                        |
| charikarLSH              | string                      | A hash of the document used for document similarities                                                                                                                                                                                                                      |
| links                    | list (list (string))        | A collection of links present in the article                                                                                                                                                                                                                               |
| applicationTags          | list (string)               | A list of tags representing application specific logic                                                                                                                                                                                                                     |
| client                   | string                      | User agent string of the device used to publish a social media post                                                                                                                                                                                                        |
| place                    | number                      | The Geo ID for the document source                                                                                                                                                                                                                                         |
| adm1                     | number                      | The adm1 Geo ID for the document source                                                                                                                                                                                                                                    |
| adm2                     | number                      | The adm2 Geo ID for the document source                                                                                                                                                                                                                                    |
| date                     | string (datetime)           | The datetime at which the document was published                                                                                                                                                                                                                           |
| title                    | string                      | The headline of the document                                                                                                                                                                                                                                               |
| providerSpecific         | object                      | Provider specific information such as the local/global reach of the document                                                                                                                                                                                               |
| body                     | string                      | The main textual content of the document                                                                                                                                                                                                                                   |
| authors                  | list (object)               | The list of authors of the document                                                                                                                                                                                                                                        |
| url                      | string                      | The url of the document                                                                                                                                                                                                                                                    |
| mainAuthor               | object                      | The main author of the document                                                                                                                                                                                                                                            |
| fetchingTime             | number (unix epoch)         | The timestamp at which the document was fetched/crawled                                                                                                                                                                                                                    |
| language                 | string                      | The two letter language code of the document                                                                                                                                                                                                                               |
| socialScores             | object                      | The share counts of this document on various social media                                                                                                                                                                                                                  |
| reach                    | number                      | The editorial reach of the document                                                                                                                                                                                                                                        |
| engagementLastUpdateDate | string (datetime)           | unknown                                                                                                                                                                                                                                                                    |
| discussionType           | string                      | The type of post (original/retweet/reply etc)                                                                                                                                                                                                                              |
| isNsfw                   | boolean                     | A flag representing whether or not a document contains explicit content                                                                                                                                                                                                    |
| namedEntities            | list (object)               | Named entities mentioned in the document, such as companies, people and places                                                                                                                                                                                             |
| topLevelEntitySentiment  | map (string, list (string)) | A map of sentiment values to the list of entity ids                                                                                                                                                                                                                        |

## Computed fields
These fields are not present on the General tenant schema. They are generated/computed by the Middleware APIs based on contextual data such as the company, user, entitlements etc. They may use the value of some fields from the General tenant schema for calculation, but are not directly mapped to them.

| Field                     | Type          | Description                                                                                                                                         | generated by        |
|---------------------------|---------------|-----------------------------------------------------------------------------------------------------------------------------------------------------|---------------------|
| matchQueryTags            | list (string) | The list of query tags (categories) matching the document                                                                                           | Consumer-ready APIs |
| paywallUrl                | string        | The url to bypass the document paywall                                                                                                              | Consumer-ready APIs |
| disableInAppOpening       | boolean       | A flag indicating whether a premium hosted document is allowed to be viewed in full, via an in-app modal                                            | Consumer-ready APIs |
| isInternalSharingDisabled | boolean       | A flag representing whether or not the document can be shared by email to a user belonging to the company                                           | MASFrestrict        |
| isSharingDisabled         | boolean       | A flag representing whether or not the document can be shared by email to anyone                                                                    | MASFrestrict        |
| isSocialSharingDisabled   | boolean       | A flag representing whether or not the document can be shared on social platforms                                                                   | MASFrestrict        |
| isTranslateDisabled       | boolean       | A flag representing whether or documentation should be translated                                                                                   | MASFrestrict        |
| redirectUrl               | string        | The redirect url (transition url) for the document if required                                                                                      | MASFrestrict        |
| originalUrl               | string        | The original URL of the document before it was overwritten with the redirectUrl, if the redirect url is set                                         | MASFrestrict        |
| restriction               | string        | A field indicating the nature of restriction applied. This was historically used by the content-stream to pick the correct document card to display | MASFrestrict        |
| restrictionHistory        | list (object) | The list of restriction rules that were applied on the document                                                                                     | MASFrestrict        |
| tagContextMatchSentence   | string        | unknown                                                                                                                                             | MASFrestrict        |
| embedUrl                  | string        | A url for embedding the document in a player - for broadcast/podcast documents                                                                      | Consumer-ready APIs |
| engagement                | number        | A number representing the engagement for social document - calculation differs based on mediaType                                                   | Consumer-ready APIs |
| ave                       | number        |                                                                                                                                                     | Consumer-ready APIs |
| isEditingDisabled         | boolean       | A flag representing whether or not a document can be edited                                                                                         | MASFrestrict        |
| isHosted                  | boolean       | A flag representing whether or not the document content is hosted on our site                                                                       | MASFrestrict        |
| isTwitterSearchApproved   | boolean       | A boolean representing whether or not the search the document is returned for has been approved by for twitter guardrails                           | MASFrestrict        |
| sourceUrlTransitionToken  | string        | Signed token used to build source transition url                                                                                                    | Consumer-ready APIs |
| urlTransitionToken        | string        | Signed token used to build transition url                                                                                                           | Consumer-ready APIs |
| mediaTypeIcon             | string        | Media type icon for some social sources                                                                                                             | Consumer-ready APIs |
| globalReach               | number        | Global reach for TVEyes documents                                                                                                                   | Consumer-ready APIs |
| localReach                | number        | Local reach for TVEyes documents                                                                                                                    | Consumer-ready APIs |
| sourceAuthority           | object        | Object representing newsguard score information for a source                                                                                        | Consumer-readu APIs |
